$(function(){$('p').html(function(index,old){return old.replace('FIXME','<span class="fixme">FIXME</span>')});$('p').html(function(index,old){return old.replace('XXX','<span class="fixme">XXX</span>')})});$(function(){$('.section-number-2').text("");for(var i=3;i<=5;i++){$('.section-number-'+i).each(function(){$(this).text($(this).text().replace(/^[0-9]+\./g,""))})}});$(function(){$('<div id="minitoc" class="dontprint"></div>').prependTo('body')});function generateMiniToc(divId){$('#minitoc').empty().append('<h2>In this section</h2>');$('#'+divId).find('h3').each(function(i){$("#minitoc").append("<a href='#"+$(this).attr("id")+"'>"+$(this).text()+"</a>")});$('#minitoc a[href^="#"]').click(function(){var href=$(this).attr('href');hsExpandAnchor(href)})}function tabifySections(){$('#table-of-contents').hide();var allSections=[];$('h2').each(function(){var tabText=$(this).clone().find('span').remove().end().text().trim();var tabId=$(this).parent().attr('id');if(tabText){tabText=tabText.replace(/^\d+\s+/,'').replace(/\[[\d/%]+\]/,'').trim();allSections.push({text:tabText,id:tabId})}});var tabs=$('<ul id="tabs"></ul>');for(i=0;i<allSections.length;i++){var item=allSections[i];html=$('<li><a href="#'+item.id+'">'+item.text+'</a></li>');tabs.append(html)}$('.title').after(tabs)}function selectTabAndScroll(href){var targetTab=$(href).closest('.ui-tabs-panel');var targetTabId=targetTab.attr('id');var targetTabAriaLabel=targetTab.attr('aria-labelledby');var targetTabIndex=$("#content ul li").index($('[aria-labelledby="'+targetTabAriaLabel+'"]'));$('#content').tabs('option','active',targetTabIndex);generateMiniToc(targetTabId);if(href=='#'+targetTabId){$.scrollTo(0)}else{$.scrollTo(href)}}$(document).ready(function(){$('#preamble').remove();$('#table-of-contents').remove();tabifySections();$('#content').tabs();$('#content').tabs('option','show',true);$('#content').tabs({activate:function(event,ui){var divId=ui.newTab.attr('aria-controls');generateMiniToc(divId)}});$('#content ul').localScroll({target:'#content',duration:0,hash:true});if($('#content')&&document.location.hash){hsExpandAnchor(document.location.hash);selectTabAndScroll(document.location.hash)}else{var divId=$('#content div[aria-expanded=true]').attr('id');generateMiniToc(divId)}$('.ui-tabs-panel a[href^="#"]').click(function(e){var href=$(this).attr('href');hsExpandAnchor(href);selectTabAndScroll(href);e.preventDefault()});hsInit();$('table').stickyTableHeaders()});function copyToClipboard(text){if(window.clipboardData&&window.clipboardData.setData){window.clipboardData.setData("Text",text)}else{window.prompt("Copy to clipboard: Ctrl+C, Enter",text)}}$(document).ready(function(){var bbScriptPath=$('script[src$="bigblow.js"]').attr('src');var bbPathToZeroClipboardSwf=bbScriptPath.replace('bigblow.js','ZeroClipboard.swf');$('.org-src-container').prepend('<div class="snippet-copy-to-clipboard"><span class="copy-to-clipboard-button">[copy]</span></div>');$(document).on('mouseenter','.org-src-container',function(){$(this).find('.snippet-copy-to-clipboard').show();if((window.location.protocol!='file:')&&($(this).find('.zclip').length==0)){$(this).find('.copy-to-clipboard-button').zclip({path:bbPathToZeroClipboardSwf,copy:function(){return $(this).parent().parent().find('.src').text()}})}}).on('mouseleave','.org-src-container',function(){$(this).find('.snippet-copy-to-clipboard').hide()});if(window.location.protocol=='file:'){$('.copy-to-clipboard-button').click(function(){var text=$(this).parent().parent().find('.src').text();text=text.replace(/\n/g,"\r\n");copyToClipboard(text)})}});$(function(){$('li > code :contains("[X]")').parent().addClass('checked').end().remove();$('li > code :contains("[-]")').parent().addClass('halfchecked').end().remove();$('li > code :contains("[Â ]")').parent().addClass('unchecked').end().remove()});$(function(){$('i :contains("[#A]")').replaceWith('<i><span style="color: #F67777;">[#A]</span></i>');$('i :contains("[#B]")').replaceWith('<i><span style="color: #B6E864;">[#B]</span></i>');$('i :contains("[#C]")').replaceWith('<i><span style="color: #C3DCFF;">[#C]</span></i>')});$(function(){$('<div id="toTop" class="dontprint"><span>^ Back to Top</span></div>').appendTo('body');$(window).scroll(function(){if($(this).scrollTop()!=0){$('#toTop').fadeIn()}else{$('#toTop').fadeOut()}});$('#toTop').click(function(e){$('html, body').animate({scrollTop:0},800);e.preventDefault()})});function togglePanel(e){e.preventDefault();$("#left-panel-contents").toggleClass('active').toggle(200);$("#right-panel-contents").toggleClass('active').toggle(200);var slidePos=$("#left-panel-button").css("left")=="-23px"?'182px':'-23px';$("#left-panel-button").animate({"left":slidePos,"opacity":0.9},{duration:"200"})}$(function(){$('<div id="left-panel-wrapper" class="dontprint"><div id="left-panel-contents" style="opacity: 0.9"></div><div id="left-panel-button" class="dontprint"><a href="#">Dashboard</a></div></div>').appendTo('body');$('<div id="right-panel-wrapper" class="dontprint"><div id="right-panel-contents" style="opacity: 0.9"></div></div>').appendTo('body');$('#left-panel-button').click(togglePanel)});$(function(){var ul=$('<ul id="listOfTodo"></ul>').appendTo('#left-panel-contents');var countOfTodo={},listOfTodo=[],totalOfTodo=0;$('span.todo').not($('#table-of-contents span.todo')).each(function(){var $thisTodo=$(this).text().trim();if($.inArray($thisTodo,listOfTodo)==-1){countOfTodo[$thisTodo]=1;listOfTodo.push($thisTodo)}else countOfTodo[$thisTodo]+=1;totalOfTodo+=1});function scoreTodo(t){switch(t){case'NEW':return 1;case'TODO':return 2;case'STRT':return 3;case'WAIT':return 4;case'DLGT':return 5;case'SDAY':return 6;case'DFRD':return 7;case'DONE':return 8;case'CANX':return 9;default:return 0}}function compareTodo(a,b){if(scoreTodo(a)<scoreTodo(b))return-1;if(scoreTodo(a)>scoreTodo(b))return 1;return 0}listOfTodo.sort(compareTodo);for(i=0;i<listOfTodo.length;i++){var $thisTodo=listOfTodo[i];$(ul).append('<li><span class="todo '+$thisTodo+'">'+$thisTodo+'</span>'+' <small>('+countOfTodo[$thisTodo]+')</small></li>')}$('#listOfTodo').before('<b>Next Actions</b> <small>('+totalOfTodo+')</small>:<br>')});$(function(){var ul=$('<ul id="listOfDone"></ul>').appendTo('#left-panel-contents');var countOfDone={},listOfDone=[],totalOfDone=0;$('span.done').not($('#table-of-contents span.done')).each(function(){var $thisDone=$(this).text().trim();if($.inArray($thisDone,listOfDone)==-1){countOfDone[$thisDone]=1;listOfDone.push($thisDone)}else countOfDone[$thisDone]+=1;totalOfDone+=1});for(i=0;i<listOfDone.length;i++){var $thisDone=listOfDone[i];$(ul).append('<li><span class="done '+$thisDone+'">'+$thisDone+'</span>'+' <small>('+countOfDone[$thisDone]+')</small></li>')}$('#listOfDone').before('<b>Done Actions</b> <small>('+totalOfDone+'):</small><br>')});$(function(){var ul=$('<ul id="listOfTags"></ul>').appendTo('#right-panel-contents');var countOfTags={},listOfTags=[],totalOfTags=0;$('span.tag').not($('#table-of-contents span.tag')).each(function(){var $thisTagGroup=$(this).text().trim().split(/\s/);for(tag in $thisTagGroup){if($.inArray($thisTagGroup[tag],listOfTags)==-1){countOfTags[$thisTagGroup[tag]]=1;listOfTags.push($thisTagGroup[tag])}else countOfTags[$thisTagGroup[tag]]+=1;totalOfTags+=1}});listOfTags.sort();for(i=0;i<listOfTags.length;i++){var $thisTag=listOfTags[i];$(ul).append('<li><span class="tag"><span class="'+$thisTag+'">'+$thisTag+'</span></span>'+' <small>('+countOfTags[$thisTag]+')</small></li>')}$('#listOfTags').before('<b>Contexts</b> <small>('+totalOfTags+'):</small><br>')});$(function(){$('.done').parent(':header').parent().find(':header').addClass('DONEheader');$('.done').parent(':header').parent().css({color:'#999999'})});$(function(){$('span.todo').click(function(e){var orgKeyword=$(this).text().trim();$('.'+orgKeyword).toggleClass('selected');$('#content .'+orgKeyword).parent().parent().toggleClass('match'+orgKeyword);$('#left-panel-wrapper .'+orgKeyword).parent().toggleClass('match'+orgKeyword);e.preventDefault()})});$(function(){$('.tag span').click(function(e){var orgTag=$(this).text().trim();$('.'+orgTag).toggleClass('selected');$('#content .'+orgTag).parent().parent().parent().toggleClass('matchtag');$('#right-panel-wrapper .'+orgTag).parent().parent().toggleClass('matchtag');e.preventDefault()})});function clickPreviousTab(){var active=$('#content').tabs('option','active');if(active==0)return;$('#content').tabs('option','active',active-1);var href=$('#content div[aria-expanded=true]').attr('id');document.location.hash=href;$.scrollTo(0)}function clickNextTab(){var active=$('#content').tabs('option','active');$('#content').tabs('option','active',active+1);var href=$('#content div[aria-expanded=true]').attr('id');document.location.hash=href;$.scrollTo(0)}function orgDefkey(e){if(!e)var e=window.event;var keycode=(e.keyCode)?e.keyCode:e.which;var actualkey=String.fromCharCode(keycode);switch(actualkey){case"?":case"h":togglePanel(e);break;case"n":clickNextTab();break;case"p":clickPreviousTab();break;case"<":$(window).scrollTop(0);break;case">":$(window).scrollTop($(document).height());break;case"-":hsCollapseAll();break;case"+":hsExpandAll();break;case"r":hsReviewTaskNext();break;case"R":hsReviewTaskPrev();break;case"q":hsReviewTaskQuit();break;case"g":location.reload(true);break}}document.onkeypress=orgDefkey;
